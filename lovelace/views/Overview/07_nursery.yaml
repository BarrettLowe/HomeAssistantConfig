- badges: []
  title: Nursery
  icon: mdi:baby-carriage
  path: nursery
  cards:
    - type: vertical-stack
      cards:
        - type: custom:button-card
          color_type: icon
          icon: >
            [[[
              var st = states['binary_sensor.crib_occupied'].state;
              return (st == 'on' ? 'mdi:baby-face-outline' : (st == 'off' ? 'mdi:baby' : 'mdi:alert'));
            ]]]
          label: >
            [[[
              var st = states['binary_sensor.crib_occupied'].state;
              return (st == 'on' ? 'Baby: In Crib' : (st == 'off' ? 'Baby: On The Loose' : 'Unavailable'));
            ]]]
          show_label: true
          entity: binary_sensor.crib_occupied
          name: Crib Status
        - type: horizontal-stack
          cards:
            - type: custom:button-card
              entity: script.nap_time
              icon: mdi:sleep
            - type: custom:button-card
              entity: script.summon_barrett
              icon: mdi:message-alert
            - type: custom:button-card
              entity: script.nursery_dark
              icon: mdi:weather-night

        - type: horizontal-stack
          cards:
            - type: custom:button-card
              entity: script.bright_room
              data:
                variables:
                  room: nursery
              icon: mdi:lightbulb-on
            - type: custom:button-card
              entity: script.start_white_noise
              icon: mdi:speaker-wireless
            - type: custom:button-card
              entity: binary_sensor.nursery_noise
              icon: mdi:microphone-outline
              tap_action: 
                action: call-service
                service: >
                  [[[
                    if (entity.state == 'unavailable')
                      return 'ffmpeg.start';
                    else
                      return 'ffmpeg.stop';
                  ]]]
                service_data:
                  entity_id: binary_sensor.nursery_noise
              state:
                - value: unavailable
                  icon: mdi:microphone-off
                - value: 'off'
                  color: green
                - value: 'on'
                  color: red
              color_type: icon
    - type: entities
      title: Lights
      entities:
        - light.nursery_dresser
        - light.nursery_sconces
        - light.rocking_chair
        - light.futon_light
    - type: entity
      entity: fan.nursery
    - type: picture-glance
      entity: camera.nursery_cam
      entities: 
        - camera.nursery_cam
      camera_image: camera.nursery_camera_snapshot_cam
      show_state: false